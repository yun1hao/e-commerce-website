{"ast":null,"code":"var _jsxFileName = \"/Users/yunhao/Desktop/config/src/client/pages/body/index.js\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useState } from \"react\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport Card from \"./card\";\nimport Datail from \"./datail\";\nimport Sort from \"../../components/Sort\";\nimport { listingProduct, RemoveGuestCart, ListingCart } from \"../../actions\";\nimport { SHOW_PRODUCT } from \"../../store/storeKey\";\nimport \"./body.css\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nexport default function Body() {\n  _s();\n  const dispatch = useDispatch();\n  const [edit, setEdit] = useState(false);\n  const [lowtohigh, setlowtohigh] = useState(false);\n  const [hightolow, sethightolow] = useState(false);\n  const [productdetail, setProductDetail] = useState({});\n  const isSignedstatus = useSelector(state => state.checkSignedIn); //已登录\n  const showProduct = useSelector(state => state.showProduct); //未登录\n  const [showAddProduct, setShowAddProduct] = useState(false); //点击新增产品\n  const product = useSelector(state => {\n    if (!state.checkSignedIn.token || state.checkSignedIn.token && state.checkSignedIn.product.length <= 0) {\n      return state.showProduct;\n    }\n    if (isSignedstatus.token && isSignedstatus.product.length > 0) {\n      //  let newuUnion = [...state.showProduct,...state.checkSignedIn.product]\n      //   for (let i = 0, len = state.showProduct.length; i < len; i++ ) {\n      //     for (let j = 0, length = state.checkSignedIn.product.length; j < length; j++) {\n      //       if (state.showProduct[i].name === state.checkSignedIn.product[j].name) {\n      //         newuUnion.splice(newuUnion.findIndex(item => item.name === state.checkSignedIn.product[j].name), 1)\n      //       }\n      //     }\n      //   }\n      // return newuUnion\n      // let newProduct = isSignedstatus.product.map((value)=>{\n      //   showProduct.forEach((item)=>{\n      //     value.number = value.name === item.name ? item.number : value.number\n      //   })\n      //   return value\n      // })\n      // console.log(newProduct,'newProduct')\n      // return newProduct\n      return isSignedstatus.product;\n    }\n  });\n  useEffect(() => {\n    if (!isSignedstatus.token) {\n      let list = showProduct.filter(v => {\n        return v.number > 0;\n      });\n      if (list.length <= 0) {\n        listingProduct(dispatch)();\n      }\n    }\n  }, []);\n  if (lowtohigh) {\n    product.sort(function (a, b) {\n      return a.price - b.price;\n    });\n  } else if (hightolow) {\n    product.sort(function (a, b) {\n      return b.price - a.price;\n    });\n  }\n  const changeProduct = item => {\n    let newProduct = product.map(v => {\n      v.number = item.name === v.name ? item.number : v.number;\n      return v;\n    });\n    dispatch({\n      type: SHOW_PRODUCT,\n      payload: {\n        allproduct: newProduct\n      }\n    });\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"body\",\n    children: [!edit ? /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"header-part\",\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        children: \"Products\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 83,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"header-right\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"sorting\",\n          children: /*#__PURE__*/_jsxDEV(Sort, {\n            setlowtohigh: setlowtohigh,\n            sethightolow: sethightolow,\n            className: \"sorting-tab\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 86,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 85,\n          columnNumber: 11\n        }, this), isSignedstatus.isAdmin ? /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"product-add\",\n          onClick: () => {\n            setEdit(true);\n            setShowAddProduct(true);\n          },\n          children: \"Add Product\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 95,\n          columnNumber: 27\n        }, this) : /*#__PURE__*/_jsxDEV(_Fragment, {}, void 0, false)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 84,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 82,\n      columnNumber: 17\n    }, this) : /*#__PURE__*/_jsxDEV(_Fragment, {}, void 0, false), edit ? /*#__PURE__*/_jsxDEV(Datail, {\n      setShowAddProduct: setShowAddProduct,\n      showAddProduct: showAddProduct,\n      setEdit: setEdit,\n      changeProduct: changeProduct,\n      productdetail: productdetail\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 114,\n      columnNumber: 9\n    }, this) : /*#__PURE__*/_jsxDEV(Card, {\n      setEdit: setEdit,\n      setProductDetail: setProductDetail,\n      changeProduct: changeProduct,\n      product: product\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 115,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 80,\n    columnNumber: 5\n  }, this);\n}\n_s(Body, \"ZrHQfr31apjnDUTeVQkziAFceiw=\", false, function () {\n  return [useDispatch, useSelector, useSelector, useSelector];\n});\n_c = Body;\nvar _c;\n$RefreshReg$(_c, \"Body\");","map":{"version":3,"names":["React","useEffect","useState","useDispatch","useSelector","Card","Datail","Sort","listingProduct","RemoveGuestCart","ListingCart","SHOW_PRODUCT","Body","dispatch","edit","setEdit","lowtohigh","setlowtohigh","hightolow","sethightolow","productdetail","setProductDetail","isSignedstatus","state","checkSignedIn","showProduct","showAddProduct","setShowAddProduct","product","token","length","list","filter","v","number","sort","a","b","price","changeProduct","item","newProduct","map","name","type","payload","allproduct","isAdmin"],"sources":["/Users/yunhao/Desktop/config/src/client/pages/body/index.js"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\r\nimport { useDispatch,useSelector } from \"react-redux\";\r\nimport Card  from \"./card\";\r\nimport Datail from \"./datail\"\r\nimport Sort from \"../../components/Sort\"\r\nimport { listingProduct, RemoveGuestCart,ListingCart } from \"../../actions\";\r\nimport {SHOW_PRODUCT} from \"../../store/storeKey\"\r\nimport \"./body.css\"\r\n\r\nexport default function Body() {\r\n  const dispatch = useDispatch();\r\n  const [edit, setEdit] = useState(false);\r\n  const [lowtohigh, setlowtohigh] = useState(false);\r\n  const [hightolow, sethightolow] = useState(false);\r\n  const [productdetail, setProductDetail] = useState({});\r\n  const isSignedstatus = useSelector((state) => state.checkSignedIn); //已登录\r\n  const showProduct = useSelector((state) => state.showProduct); //未登录\r\n  const [showAddProduct,setShowAddProduct] = useState(false); //点击新增产品\r\n  const product = useSelector((state) => {\r\n    if(!state.checkSignedIn.token || state.checkSignedIn.token && state.checkSignedIn.product.length <= 0){\r\n      return state.showProduct\r\n    }\r\n    if(isSignedstatus.token && isSignedstatus.product.length > 0 ){\r\n        //  let newuUnion = [...state.showProduct,...state.checkSignedIn.product]\r\n        //   for (let i = 0, len = state.showProduct.length; i < len; i++ ) {\r\n        //     for (let j = 0, length = state.checkSignedIn.product.length; j < length; j++) {\r\n        //       if (state.showProduct[i].name === state.checkSignedIn.product[j].name) {\r\n        //         newuUnion.splice(newuUnion.findIndex(item => item.name === state.checkSignedIn.product[j].name), 1)\r\n        //       }\r\n        //     }\r\n        //   }\r\n      // return newuUnion\r\n      // let newProduct = isSignedstatus.product.map((value)=>{\r\n      //   showProduct.forEach((item)=>{\r\n      //     value.number = value.name === item.name ? item.number : value.number\r\n      //   })\r\n      //   return value\r\n      // })\r\n      // console.log(newProduct,'newProduct')\r\n      // return newProduct\r\n      return isSignedstatus.product\r\n    }\r\n  });\r\n  \r\n  useEffect(() => {\r\n    \r\n    if(!isSignedstatus.token){\r\n      let list = showProduct.filter((v)=>{\r\n            return v.number > 0\r\n          })\r\n          if(list.length <= 0){\r\n            listingProduct(dispatch)()\r\n          }\r\n    }\r\n  }, []);\r\n\r\n  if (lowtohigh) {\r\n    product.sort(function (a, b) {\r\n      return a.price - b.price;\r\n    });\r\n  } else if (hightolow) {\r\n    product.sort(function (a, b) {\r\n      return b.price - a.price;\r\n    });\r\n  }\r\n\r\n  const changeProduct = (item)=>{\r\n    let newProduct = product.map((v)=>{\r\n      v.number = item.name === v.name ? item.number : v.number\r\n      return v\r\n    })\r\n    dispatch({\r\n      type: SHOW_PRODUCT,\r\n      payload: {\r\n        allproduct:newProduct\r\n      },\r\n    });\r\n  }\r\n  return (\r\n    <div className=\"body\">\r\n      {\r\n        !edit ? <div className=\"header-part\">\r\n        <h2>Products</h2>\r\n        <div className=\"header-right\">\r\n          <div className=\"sorting\">\r\n            <Sort\r\n              setlowtohigh={setlowtohigh}\r\n              sethightolow={sethightolow}\r\n              className=\"sorting-tab\"\r\n            />\r\n          </div>\r\n\r\n        \r\n          {isSignedstatus.isAdmin ? (\r\n                          <button\r\n                            className=\"product-add\"\r\n                            onClick={() => {\r\n                              setEdit(true)\r\n                              setShowAddProduct(true)\r\n                            }}\r\n                          >\r\n                            Add Product\r\n                          </button>\r\n                        ) : (\r\n                          <></>\r\n                        )}\r\n\r\n\r\n        </div>\r\n      </div> : <></>\r\n      }\r\n\r\n      {edit \r\n      ? <Datail setShowAddProduct={setShowAddProduct} showAddProduct={showAddProduct} setEdit={setEdit} changeProduct={changeProduct} productdetail={productdetail} /> \r\n      : <Card setEdit={setEdit} setProductDetail={setProductDetail} changeProduct={changeProduct} product={product} />\r\n       }\r\n    </div>\r\n  );\r\n}\r\n\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}