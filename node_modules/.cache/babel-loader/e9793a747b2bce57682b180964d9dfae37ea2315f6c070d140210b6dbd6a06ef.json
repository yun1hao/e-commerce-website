{"ast":null,"code":"var _jsxFileName = \"/Users/yunhao/Desktop/config(2)/src/client/components/CartProduct.js\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useState } from \"react\";\nimport { useSelector, useDispatch } from \"react-redux\";\nimport { RemovePersonCart, UpdatePersonCart, ListingCart, UpdateNotLoginCart, listingProduct } from \"../actions/index\";\nimport \"./CartProduct.css\";\nimport { SHOW_PRODUCT, SIGNIN_STATUS } from \"../store/storeKey\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function CartProduct(_ref) {\n  _s();\n  let {\n    product,\n    newList,\n    setProduct,\n    changeProduct\n  } = _ref;\n  const dispatch = useDispatch();\n  const isSignedstatus = useSelector(state => state.checkSignedIn);\n  const minus = (item, index) => {\n    if (isSignedstatus.token) {\n      UpdatePersonCart(dispatch)({\n        user: isSignedstatus.user,\n        cart: {\n          name: item.name,\n          number: item.number - 1,\n          price: item.price,\n          openAdd: true\n        }\n      }).then(res => {\n        setProduct(res);\n      });\n      return;\n    } else {\n      console.log(\"guest minus\");\n      item.number--;\n      changeProduct(item);\n    }\n  };\n  const add = (item, index) => {\n    if (isSignedstatus.token) {\n      UpdatePersonCart(dispatch)({\n        user: isSignedstatus.user,\n        cart: {\n          name: item.name,\n          number: item.number + 1,\n          price: item.price,\n          openAdd: true\n        }\n      }).then(res => {\n        setProduct(res);\n      });\n      return;\n    } else {\n      item.number++;\n      changeProduct(item);\n    }\n  };\n  const removefromcart = item => {\n    if (isSignedstatus.token) {\n      RemovePersonCart(dispatch)({\n        user: isSignedstatus.user,\n        removeitem: item.name\n      }).then(() => {\n        item.number = 0;\n        let removeList = product.map(v => {\n          v.number = item.id === v.id ? item.number : v.number;\n          return v;\n        });\n        setProduct(removeList);\n      });\n      return;\n    } else {\n      item.number = 0;\n      changeProduct(item);\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: newList.map((item, index) => {\n      return /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"outline-cart\",\n        children: [/*#__PURE__*/_jsxDEV(\"img\", {\n          src: item.source,\n          alt: \"logo\",\n          className: \"picture-cart\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 83,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"detail-cart\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"id-header\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"h4-cart\",\n              children: /*#__PURE__*/_jsxDEV(\"h4\", {\n                children: item.name\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 87,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 86,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              children: [\"$\", item.price]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 89,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 85,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"id-bottom\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"control-number-cart\",\n              children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                className: \"minus-cart\",\n                onClick: () => minus(item, index),\n                children: \"-\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 93,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"productnumber-cart\",\n                children: /*#__PURE__*/_jsxDEV(\"span\", {\n                  children: item.number\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 97,\n                  columnNumber: 19\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 96,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                className: \"add-cart\",\n                onClick: () => add(item, index),\n                children: \"+\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 99,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 92,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"remove-cart\",\n              onClick: () => removefromcart(item),\n              children: \"Remove\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 103,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 91,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 84,\n          columnNumber: 11\n        }, this)]\n      }, index, true, {\n        fileName: _jsxFileName,\n        lineNumber: 82,\n        columnNumber: 11\n      }, this);\n    })\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 78,\n    columnNumber: 5\n  }, this);\n}\n_s(CartProduct, \"PTKFFDOe4d4Hg5d58f5AoOg7u8c=\", false, function () {\n  return [useDispatch, useSelector];\n});\n_c = CartProduct;\nvar _c;\n$RefreshReg$(_c, \"CartProduct\");","map":{"version":3,"names":["React","useEffect","useState","useSelector","useDispatch","RemovePersonCart","UpdatePersonCart","ListingCart","UpdateNotLoginCart","listingProduct","SHOW_PRODUCT","SIGNIN_STATUS","CartProduct","product","newList","setProduct","changeProduct","dispatch","isSignedstatus","state","checkSignedIn","minus","item","index","token","user","cart","name","number","price","openAdd","then","res","console","log","add","removefromcart","removeitem","removeList","map","v","id","source"],"sources":["/Users/yunhao/Desktop/config(2)/src/client/components/CartProduct.js"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\nimport { useSelector,useDispatch } from \"react-redux\";\nimport {\n  RemovePersonCart,\n  UpdatePersonCart,\n  ListingCart,\n  UpdateNotLoginCart,\n  listingProduct\n} from \"../actions/index\";\nimport \"./CartProduct.css\";\nimport {SHOW_PRODUCT,SIGNIN_STATUS} from \"../store/storeKey\"\nexport default function CartProduct({product,newList,setProduct,changeProduct}) {\n  const dispatch = useDispatch();\n  const isSignedstatus = useSelector((state) => state.checkSignedIn);\n\n  const minus = (item,index) => {\n    if (isSignedstatus.token) {\n      UpdatePersonCart(dispatch)({\n        user: isSignedstatus.user,\n        cart: {\n          name: item.name,\n          number: item.number - 1,\n          price: item.price,\n          openAdd: true,\n        },\n      }).then((res)=>{\n        setProduct(res)\n      })\n      return\n    } else {\n      console.log(\"guest minus\");\n      item.number--\n      changeProduct(item)\n    }\n  };\n\n  const add = (item,index) => {\n    if (isSignedstatus.token) {\n      UpdatePersonCart(dispatch)({\n        user: isSignedstatus.user,\n        cart: {\n          name: item.name,\n          number: item.number + 1,\n          price: item.price,\n          openAdd: true,\n        },\n      }).then((res)=>{\n        setProduct(res)\n      })\n      return\n    } else {\n      item.number++\n      changeProduct(item)\n    }\n  };\n\n  const removefromcart = (item) => {\n    if(isSignedstatus.token){\n        RemovePersonCart(dispatch)({\n          user: isSignedstatus.user,\n          removeitem: item.name,\n        }).then(()=>{\n          item.number = 0\n          let removeList = product.map((v)=>{\n            v.number = item.id === v.id ? item.number : v.number\n            return v\n          })\n          setProduct(removeList)\n        })\n      return\n    }else{\n      item.number = 0\n      changeProduct(item)\n    }\n  };\n\n  return (\n    <div>\n    {\n      newList.map((item,index)=>{\n        return (\n          <div className=\"outline-cart\" key={index}>\n          <img src={item.source} alt=\"logo\" className=\"picture-cart\" />\n          <div className=\"detail-cart\">\n            <div className=\"id-header\">\n              <div className=\"h4-cart\">\n                <h4>{item.name}</h4>\n              </div>\n              <span>${item.price}</span>\n            </div>\n            <div className=\"id-bottom\">\n              <div className=\"control-number-cart\">\n                <button className=\"minus-cart\" onClick={() => minus(item,index)}>\n                  -\n                </button>\n                <div className=\"productnumber-cart\">\n                  <span>{item.number}</span>\n                </div>\n                <button className=\"add-cart\" onClick={() => add(item,index)}>\n                  +\n                </button>\n              </div>\n              <span className=\"remove-cart\" onClick={() => removefromcart(item)}>\n                Remove\n              </span>\n            </div>\n          </div>\n        </div>\n        )\n      })\n      }\n    </div>\n  );\n}\n\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}