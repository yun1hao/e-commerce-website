{"ast":null,"code":"import { ajaxConfigHelper } from \"../helper\";\nexport const CLOSE_MOUDULE = \"closemodule\";\nexport const SHOW_DATA = \"init\";\nexport const SIGNUP_WINDOW = \"signup\";\nexport const SIGNIN_USER_INFO = \"signinfo\";\nexport const ADD_SIGNUP = \"signup\";\nexport const SIGNIN_STATUS = \"siginstatus\";\nexport const SIGNOUT_STATUS = \"sigoutstatus\";\nexport const FORGET_WINDOW = \"forgetwindow\";\nexport const SHOW_PRODUCT = \"showproduct\";\nexport const ADD_PRODUCT = \"addproduct\";\nexport const MOD_PRODUCT = \"modifyProduct\";\nexport const ADD_CART = \"addtoCart\";\nexport const UPDATE_PERSON_CART = \"updatePersonCart\";\nexport const closeModal = dispatch => () => {\n  dispatch({\n    type: CLOSE_MOUDULE,\n    payload: {\n      isclose: true\n    }\n  });\n};\nexport const UpdatePersonCart = dispatch => () => {\n  dispatch({\n    type: UPDATE_PERSON_CART,\n    payload: {\n      isclose: true\n    }\n  });\n};\nexport const addtocart = dispatch => content => {\n  dispatch({\n    type: ADD_CART,\n    payload: {\n      ...content\n    }\n  });\n};\nexport const initdata = dispatch => async () => {\n  try {\n    const response = await fetch(\"/alldata\");\n    const result = await response.json();\n    dispatch({\n      type: SHOW_DATA,\n      payload: {\n        result\n      }\n    });\n  } catch (error) {\n    console.log(error);\n  }\n};\nexport const signupModal = dispatch => () => {\n  dispatch({\n    type: SIGNUP_WINDOW\n  });\n};\nexport const signindata = dispatch => data => {\n  dispatch({\n    type: SIGNIN_USER_INFO,\n    payload: {\n      data\n    }\n  });\n};\nexport const signupdata = dispatch => async content => {\n  try {\n    console.log(content);\n    const response = await fetch(\"/add\", ajaxConfigHelper({\n      content,\n      id: 2\n    }));\n    const result = await response.json();\n    const {\n      message,\n      newadd\n    } = await response.json();\n    dispatch({\n      type: ADD_SIGNUP,\n      payload: {\n        ...newadd\n      }\n    });\n  } catch (error) {\n    console.log(error);\n  }\n};\nexport const checksigninStatus = dispatch => async content => {\n  try {\n    const res = await fetch(\"/ifignin\", ajaxConfigHelper({\n      content\n    }));\n    const result = await res.json();\n    const status = result.signinStatus.status;\n    const email = result.signinStatus.iswho;\n    let isAdmin = false;\n    if (email == \"ni\") {\n      isAdmin = true;\n    }\n    console.log(\"check in admin:\" + isAdmin);\n    dispatch({\n      type: SIGNIN_STATUS,\n      payload: {\n        status,\n        isAdmin,\n        email\n      }\n    });\n  } catch (error) {\n    console.log(error);\n  }\n};\n// export const checkadminStatus = (dispatch) => async (content) => {\n//   try {\n//     const res = await fetch(\"/ifadmin\", ajaxConfigHelper({ content }));\n//     const result = await res.json();\n\n//     const email = result.signinStatus.iswho;\n//     let isAdmin = false;\n//     if (email == \"ni\") {\n//       isAdmin = true;\n//     }\n//     console.log(\"check in admin:\" + isAdmin);\n\n//     dispatch({\n//       type: SIGNIN_STATUS,\n//       payload: {\n//         status,\n//         isAdmin,\n//       },\n//     });\n//   } catch (error) {\n//     console.log(error);\n//   }\n// };\n\nexport const signoutStatus = dispatch => async () => {\n  try {\n    const status = false;\n    dispatch({\n      type: SIGNOUT_STATUS,\n      payload: {\n        status\n      }\n    });\n  } catch (error) {\n    console.log(error);\n  }\n};\nexport const listingProduct = dispatch => async () => {\n  try {\n    const response = await fetch(\"/allproduct\");\n\n    // const result = await response.json();\n    const {\n      message,\n      allproduct\n    } = await response.json();\n    dispatch({\n      type: SHOW_PRODUCT,\n      payload: {\n        allproduct\n      }\n    });\n  } catch (error) {\n    console.log(error);\n  }\n};\nexport const addProductdata = dispatch => async content => {\n  try {\n    console.log(content);\n    const response = await fetch(\"/addproduct\", ajaxConfigHelper({\n      content\n    }));\n    // const result = await response.json();\n    const {\n      message,\n      newadd\n    } = await response.json();\n    dispatch({\n      type: ADD_PRODUCT,\n      payload: {\n        ...newadd\n      }\n    });\n  } catch (error) {\n    console.log(error);\n  }\n};\nexport const modProduct = dispatch => async content => {\n  try {\n    const response = await fetch(\"/modProduct\", ajaxConfigHelper({\n      content\n    }, \"PUT\"));\n    const result = await response.json();\n    const {\n      message,\n      modifiedCount\n    } = await response.json();\n    dispatch({\n      type: MOD_PRODUCT,\n      payload: {\n        ...modifiedCount\n      }\n    });\n    console.log(result);\n  } catch (error) {\n    console.log(error);\n  }\n};","map":{"version":3,"names":["ajaxConfigHelper","CLOSE_MOUDULE","SHOW_DATA","SIGNUP_WINDOW","SIGNIN_USER_INFO","ADD_SIGNUP","SIGNIN_STATUS","SIGNOUT_STATUS","FORGET_WINDOW","SHOW_PRODUCT","ADD_PRODUCT","MOD_PRODUCT","ADD_CART","UPDATE_PERSON_CART","closeModal","dispatch","type","payload","isclose","UpdatePersonCart","addtocart","content","initdata","response","fetch","result","json","error","console","log","signupModal","signindata","data","signupdata","id","message","newadd","checksigninStatus","res","status","signinStatus","email","iswho","isAdmin","signoutStatus","listingProduct","allproduct","addProductdata","modProduct","modifiedCount"],"sources":["/Users/yunhao/Desktop/Chuwa_traning/project2/project2/src/client/actions/index.js"],"sourcesContent":["import { ajaxConfigHelper } from \"../helper\";\nexport const CLOSE_MOUDULE = \"closemodule\";\nexport const SHOW_DATA = \"init\";\nexport const SIGNUP_WINDOW = \"signup\";\nexport const SIGNIN_USER_INFO = \"signinfo\";\nexport const ADD_SIGNUP = \"signup\";\nexport const SIGNIN_STATUS = \"siginstatus\";\nexport const SIGNOUT_STATUS = \"sigoutstatus\";\nexport const FORGET_WINDOW = \"forgetwindow\";\nexport const SHOW_PRODUCT = \"showproduct\";\nexport const ADD_PRODUCT = \"addproduct\";\nexport const MOD_PRODUCT = \"modifyProduct\";\nexport const ADD_CART = \"addtoCart\";\nexport const UPDATE_PERSON_CART = \"updatePersonCart\";\nexport const closeModal = (dispatch) => () => {\n  dispatch({\n    type: CLOSE_MOUDULE,\n    payload: {\n      isclose: true,\n    },\n  });\n};\nexport const UpdatePersonCart = (dispatch) => () => {\n  dispatch({\n    type: UPDATE_PERSON_CART,\n    payload: {\n      isclose: true,\n    },\n  });\n};\n\nexport const addtocart = (dispatch) => (content) => {\n  dispatch({\n    type: ADD_CART,\n    payload: {\n      ...content,\n    },\n  });\n};\n\nexport const initdata = (dispatch) => async () => {\n  try {\n    const response = await fetch(\"/alldata\");\n\n    const result = await response.json();\n\n    dispatch({\n      type: SHOW_DATA,\n      payload: {\n        result,\n      },\n    });\n  } catch (error) {\n    console.log(error);\n  }\n};\n\nexport const signupModal = (dispatch) => () => {\n  dispatch({\n    type: SIGNUP_WINDOW,\n  });\n};\nexport const signindata = (dispatch) => (data) => {\n  dispatch({\n    type: SIGNIN_USER_INFO,\n    payload: {\n      data,\n    },\n  });\n};\nexport const signupdata = (dispatch) => async (content) => {\n  try {\n    console.log(content);\n    const response = await fetch(\"/add\", ajaxConfigHelper({ content, id: 2 }));\n    const result = await response.json();\n    const { message, newadd } = await response.json();\n\n    dispatch({\n      type: ADD_SIGNUP,\n      payload: {\n        ...newadd,\n      },\n    });\n  } catch (error) {\n    console.log(error);\n  }\n};\n\nexport const checksigninStatus = (dispatch) => async (content) => {\n  try {\n    const res = await fetch(\"/ifignin\", ajaxConfigHelper({ content }));\n    const result = await res.json();\n\n    const status = result.signinStatus.status;\n    const email = result.signinStatus.iswho;\n    let isAdmin = false;\n    if (email == \"ni\") {\n      isAdmin = true;\n    }\n    console.log(\"check in admin:\" + isAdmin);\n\n    dispatch({\n      type: SIGNIN_STATUS,\n      payload: {\n        status,\n        isAdmin,\n        email,\n      },\n    });\n  } catch (error) {\n    console.log(error);\n  }\n};\n// export const checkadminStatus = (dispatch) => async (content) => {\n//   try {\n//     const res = await fetch(\"/ifadmin\", ajaxConfigHelper({ content }));\n//     const result = await res.json();\n\n//     const email = result.signinStatus.iswho;\n//     let isAdmin = false;\n//     if (email == \"ni\") {\n//       isAdmin = true;\n//     }\n//     console.log(\"check in admin:\" + isAdmin);\n\n//     dispatch({\n//       type: SIGNIN_STATUS,\n//       payload: {\n//         status,\n//         isAdmin,\n//       },\n//     });\n//   } catch (error) {\n//     console.log(error);\n//   }\n// };\n\nexport const signoutStatus = (dispatch) => async () => {\n  try {\n    const status = false;\n    dispatch({\n      type: SIGNOUT_STATUS,\n      payload: {\n        status,\n      },\n    });\n  } catch (error) {\n    console.log(error);\n  }\n};\nexport const listingProduct = (dispatch) => async () => {\n  try {\n    const response = await fetch(\"/allproduct\");\n\n    // const result = await response.json();\n    const { message, allproduct } = await response.json();\n    dispatch({\n      type: SHOW_PRODUCT,\n      payload: {\n        allproduct,\n      },\n    });\n  } catch (error) {\n    console.log(error);\n  }\n};\n\nexport const addProductdata = (dispatch) => async (content) => {\n  try {\n    console.log(content);\n    const response = await fetch(\"/addproduct\", ajaxConfigHelper({ content }));\n    // const result = await response.json();\n    const { message, newadd } = await response.json();\n\n    dispatch({\n      type: ADD_PRODUCT,\n      payload: {\n        ...newadd,\n      },\n    });\n  } catch (error) {\n    console.log(error);\n  }\n};\nexport const modProduct = (dispatch) => async (content) => {\n  try {\n    const response = await fetch(\n      \"/modProduct\",\n      ajaxConfigHelper({ content }, \"PUT\")\n    );\n    const result = await response.json();\n    const { message, modifiedCount } = await response.json();\n\n    dispatch({\n      type: MOD_PRODUCT,\n      payload: { ...modifiedCount },\n    });\n    console.log(result);\n  } catch (error) {\n    console.log(error);\n  }\n};\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}